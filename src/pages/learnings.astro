---
import Layout from '../layouts/Layout.astro';
import ToolHeader from '../components/ToolHeader.astro';
import { learnings } from '../data/learnings';

const sortedLearnings = [...learnings].sort(
    (a, b) => new Date(b.date).getTime() - new Date(a.date).getTime()
);

function formatDate(dateString: string): string {
    const date = new Date(dateString);
    return date.toLocaleDateString('en-US', {
        year: 'numeric',
        month: 'long',
        day: 'numeric',
    });
}
---

<Layout
    title="Learnings | Keeler Tools"
    description="Notes and discoveries from building browser-native tools with AI."
>
    <ToolHeader
        title="Learnings"
        description="Small discoveries, gotchas, and insights from building this site."
    />

    <main class="relative overflow-hidden">
        <div class="pointer-events-none absolute inset-0" aria-hidden="true">
            <div
                class="absolute -left-20 top-16 h-80 w-80 rounded-full bg-[radial-gradient(circle,rgba(36,209,248,0.15)_0%,transparent_70%)]"
            >
            </div>
            <div
                class="absolute right-10 top-0 h-64 w-64 rounded-full bg-[radial-gradient(circle,rgba(27,150,180,0.15)_0%,transparent_70%)]"
            >
            </div>
            <div
                class="absolute bottom-[-10%] left-[40%] h-72 w-72 rounded-full bg-[radial-gradient(circle,rgba(186,230,254,0.3)_0%,transparent_70%)]"
            >
            </div>
        </div>

        <section class="relative mx-auto max-w-4xl px-6 py-12">
            <div class="flex flex-col gap-6">
                {
                    sortedLearnings.map((learning) => (
                        <article class="rounded-2xl border border-slate-200 bg-white p-6 shadow-[0_40px_90px_-70px_rgba(15,23,42,0.4)]">
                            <time
                                class="inline-block rounded-full bg-brand/10 px-3 py-1 text-xs font-semibold uppercase tracking-[0.2em] text-brand-dark"
                                datetime={learning.date}
                            >
                                {formatDate(learning.date)}
                            </time>
                            <h2 class="mt-3 font-display text-xl font-semibold text-slate-900">
                                {learning.title}
                            </h2>
                            <p class="mt-2 leading-relaxed text-slate-600">
                                {learning.description}
                            </p>
                        </article>
                    ))
                }
            </div>
        </section>
    </main>
</Layout>
